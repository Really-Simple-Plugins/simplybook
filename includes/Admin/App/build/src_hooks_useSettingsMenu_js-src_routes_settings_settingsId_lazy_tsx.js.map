{"version":3,"file":"src_hooks_useSettingsMenu_js-src_routes_settings_settingsId_lazy_tsx.js","mappings":"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","sources":["webpack://simplybook_app/./src/components/Blocks/Block.jsx","webpack://simplybook_app/./src/components/Blocks/BlockContent.jsx","webpack://simplybook_app/./src/components/Blocks/BlockHeading.jsx","webpack://simplybook_app/./src/components/Inputs/ButtonInput.jsx","webpack://simplybook_app/./src/hooks/useSettingsData.js","webpack://simplybook_app/./src/hooks/useSettingsMenu.js","webpack://simplybook_app/./src/routes/settings/$settingsId.lazy.tsx"],"sourcesContent":["const Block = ({ className = '', children }) => {\n  const classes = `bg-white shadow-md rounded-md  ${className}`;\n\n  return <div className={classes}>{children}</div>;\n};\n\nexport default Block;","const BlockContent = ({ children,  className = 'p-5' }) => {\n  return (\n    <div className={className}>\n      {children}\n    </div>\n  )\n}\n\nexport default BlockContent;","const BlockHeading = ({title, controls }) => {\n\n  return (\n      <div className=\"py-4 px-5 flex justify-between items-center\">\n        <h2 className=\"text-base font-bold\">{title}</h2>\n        {controls}\n      </div>\n  )\n}\nexport default BlockHeading;","import { Link } from \"@tanstack/react-router\";\n\nconst ButtonInput = ({ children, onClick, link = {}, variant = \"primary\", disabled = false, ...props }) => {\n  // Base styles for both variants\n  const baseStyles = \"font-bold py-2 px-6 rounded-md transition-all duration-200\";\n\n  // Variants for primary and secondary buttons\n  const variants = {\n    primary: \"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800\",\n    secondary: \"border border-blue-600 text-blue-600 hover:bg-blue-100 active:bg-blue-200\",\n  };\n\n  // Disabled styles\n  const disabledStyles = \"opacity-50 cursor-not-allowed\";\n\n  // Final className based on variant and disabled state\n  const className = `${baseStyles} ${variants[variant]} ${disabled ? disabledStyles : \"\"}`;\n\n  if (link.to) {\n    return (\n        <Link to={link.to} className={className} {...props} onClick={disabled ? (e) => e.preventDefault() : undefined}>\n          {children}\n        </Link>\n    );\n  }\n\n  return (\n      <button onClick={onClick} className={className} disabled={disabled} {...props}>\n        {children}\n      </button>\n  );\n};\n\nexport default ButtonInput;\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useState, useEffect } from 'react';\n\n/**\n * Custom hook for managing settings data using Tanstack Query.\n * This hook provides functions to fetch and update settings.\n *\n * @returns {Object} - An object containing settings data, update function, and status flags.\n */\nconst useSettingsData = () => {\n  const queryClient = useQueryClient();\n\n  // Store for managing local changes before saving\n  const [localSettings, setLocalSettings] = useState({});\n\n  // Placeholder settings array to simulate settings from server\n  const placeholderSettings = {\n    'general': {\n    'authentication': {\n      'apiKey': {\n        'label': 'API Key',\n        'type': 'text',\n        'value': '1234567890',\n      },\n      'apiSecret': {\n        'label': 'API Secret',\n        'type': 'text',\n        'value': '1234567890',\n      },\n    },\n      'widgets': {\n      'bookings_page': {\n        'label': 'Bookings Page',\n        'type': 'text',\n        'value': 'https://simplybook.me',\n      },\n      'calendar_page': {\n        'label': 'Calendar Page',\n        'type': 'text',\n        'value': 'https://simplybook.me',\n      },\n        'short_code': {\n          'label': 'Short Code',\n          'type': 'text',\n          'value': '1234567890',\n        },\n      }\n    },\n    'providers': {\n      'name': {\n        'label': 'Name',\n        'type': 'text',\n        'value': 'John Doe',\n      },\n      'email': {\n        'label': 'Email',\n        'type': 'email',\n        'value': '',\n      },\n      'phone': {\n        'label': 'Phone',\n        'type': 'tel',\n        'value': '',\n      },\n    }\n  };\n\n  // Placeholder function for fetching settings from server\n  const fetchSettings = async () => {\n    // Simulate an API call\n    return  new Promise((resolve, reject) => {\n        // window.simplybook && window.simplybook.settings_fields\n        if (window.simplybook && window.simplybook.settings_fields) {\n          resolve(window.simplybook.settings_fields);\n        }\n        reject(new Error('Settings fields not found'));\n      });\n  };\n\n\n\n  // Placeholder function for updating settings on server\n  const updateSettings = async (updatedSettings) => {\n    // Simulate an API call\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve(updatedSettings);\n      }, 1000);\n    });\n  };\n\n  // Query for fetching settings from server\n  const { data: settings, isLoading, isError } = useQuery({\n    queryKey: ['settings'],\n    queryFn: fetchSettings,\n    onSuccess: (data) => {\n      // Set initial settings to state\n      setLocalSettings(data);\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n\n  // Mutation for updating settings on server\n  const updateSettingsMutation = useMutation({\n    mutationFn: updateSettings,\n    onSuccess: () => {\n      // Invalidate and refetch settings after successful update\n      queryClient.invalidateQueries(['settings']);\n    },\n  });\n\n  /**\n   * Function to handle updating local settings state.\n   *\n   * @param {string} key - The key of the setting to update.\n   * @param {any} value - The new value for the setting.\n   */\n  const updateSetting = (key, value) => {\n    setLocalSettings((prevSettings) => ({\n      ...prevSettings,\n      [key]: value,\n    }));\n  };\n\n  /**\n   * Function to save the updated settings to the server.\n   */\n  const saveSettings = () => {\n    updateSettingsMutation.mutate(localSettings);\n  };\n\n  useEffect(() => {\n    // Sync localSettings with fetched settings\n    if (settings) {\n      setLocalSettings(settings);\n    }\n  }, [settings]);\n\n  return {\n    settings: localSettings,\n    updateSetting,\n    saveSettings,\n    isLoading,\n    isError,\n    isSaving: updateSettingsMutation.isLoading,\n  };\n};\n\nexport default useSettingsData;\n","import { useState, useEffect } from 'react';\nimport {useQuery} from '@tanstack/react-query';\nimport {Route} from '../routes/settings/$settingsId.lazy';\n\n\nconst useSettingsMenu = () => {\n  const { settingsId } = Route.useParams()\n  // Query for fetching settings from server\n const query  = useQuery({\n    queryKey: ['settings_menu'],\n    queryFn: () => {\n      return new Promise((resolve, reject) => {\n        // window.simplybook && window.simplybook.settings_menu\n        if (window.simplybook && window.simplybook.settings_menu) {\n          resolve(window.simplybook.settings_menu);\n        }\n        reject(new Error('Settings menu not found'));\n      });\n    },\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  });\n\n  const currentSection = query.isFetched && query.data.find((section) => section.id === settingsId) || {};\n\n  return {\n    menu: query.data,\n    currentSection,\n    menuIsLoading: query.isLoading,\n    menuIsError: query.isError,\n  }\n};\n\nexport default useSettingsMenu;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { createLazyFileRoute, } from '@tanstack/react-router';\nimport BlockHeading from '../../components/Blocks/BlockHeading.jsx';\nimport Block from '../../components/Blocks/Block';\nimport useSettingsMenu from '../../hooks/useSettingsMenu';\nimport BlockContent from '../../components/Blocks/BlockContent';\nimport { useEffect, useState } from 'react';\nimport useSettingsData from '../../hooks/useSettingsData';\nimport ButtonInput from '../../components/Inputs/ButtonInput';\nexport var Route = createLazyFileRoute('/settings/$settingsId')({\n    // @todo move to a seperate function? or a hook?\n    loader: function (_a) {\n        var _b;\n        var params = _a.params;\n        // Instead of fetching from an API, we access the localized menu data\n        var menuData = ((_b = window.simplybook) === null || _b === void 0 ? void 0 : _b.settings_menu) || [];\n        var settingsData = menuData.find(function (item) { return item.id === params.settingsId; });\n        if (!settingsData) {\n            throw new Error('Settings not found');\n        }\n        return { settingsData: settingsData };\n    },\n    component: Settings,\n});\nfunction Settings() {\n    var _a = useSettingsData(), settings = _a.settings, saveSettings = _a.saveSettings, isSaving = _a.isSaving, isLoading = _a.isLoading;\n    var _b = useSettingsMenu(), menu = _b.menu, menuIsError = _b.menuIsError, menuIsLoading = _b.menuIsLoading, currentSection = _b.currentSection;\n    var settingsId = Route.useParams().settingsId;\n    if (menuIsLoading) {\n        return _jsx(\"div\", { children: \"Loading...\" });\n    }\n    if (menuIsError) {\n        return _jsx(\"div\", { children: \"Error loading settings menu\" });\n    }\n    var lastGroupId = currentSection.groups[currentSection.groups.length - 1].id;\n    return (_jsxs(_Fragment, { children: [currentSection.groups &&\n                currentSection.groups.map(function (group) {\n                    // if last block add class\n                    var className = lastGroupId === group.id ? 'rounded-b-none' : 'mb-5';\n                    return (_jsxs(Block, { className: className, children: [_jsx(BlockHeading, { title: group.title }), _jsx(BlockContent, { children: isLoading ? 'Loading settings fields...' : group.title })] }, group.id));\n                }), _jsxs(\"div\", { className: 'sticky bg-gray-50 shadow-md rounded-b-md z-10', children: [_jsx(ScrollProgressLine, {}), _jsxs(\"div\", { className: 'flex flex-row p-5 justify-end', children: [_jsx(ButtonInput, { onClick: saveSettings, disabled: isSaving, children: isSaving ? 'Saving...' : 'Save' }), isSaving && _jsx(\"div\", { children: \"Saving...\" })] })] })] }));\n}\nvar ScrollProgressLine = function () {\n    var _a = useState(0), scrollProgress = _a[0], setScrollProgress = _a[1];\n    useEffect(function () {\n        var onScroll = function () {\n            var scrollable = document.documentElement.scrollHeight - window.innerHeight;\n            setScrollProgress(Math.round((window.scrollY / scrollable) * 100));\n        };\n        window.addEventListener('scroll', onScroll);\n        return function () { return window.removeEventListener('scroll', onScroll); };\n    }, []);\n    var canScroll = document.documentElement.scrollHeight > window.innerHeight;\n    if (!canScroll) {\n        return null;\n    }\n    return (_jsx(\"div\", { className: \"w-full bg-gray-200 h-1\", children: _jsx(\"div\", { className: \"bg-blue-500 h-full\", style: { width: \"\".concat(Math.max(scrollProgress, 10), \"%\") } }) }));\n};\n"],"names":["Block","className","children","classes","createElement","BlockContent","BlockHeading","title","controls","Link","ButtonInput","onClick","link","variant","disabled","props","baseStyles","variants","primary","secondary","disabledStyles","to","e","preventDefault","undefined","useQuery","useMutation","useQueryClient","useState","useEffect","useSettingsData","queryClient","localSettings","setLocalSettings","placeholderSettings","fetchSettings","Promise","resolve","reject","window","simplybook","settings_fields","Error","updateSettings","updatedSettings","setTimeout","data","settings","isLoading","isError","queryKey","queryFn","onSuccess","staleTime","updateSettingsMutation","mutationFn","invalidateQueries","updateSetting","key","value","prevSettings","saveSettings","mutate","isSaving","Route","useSettingsMenu","settingsId","useParams","query","settings_menu","currentSection","isFetched","find","section","id","menu","menuIsLoading","menuIsError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","createLazyFileRoute","loader","_a","_b","params","menuData","settingsData","item","component","Settings","lastGroupId","groups","length","map","group","ScrollProgressLine","scrollProgress","setScrollProgress","onScroll","scrollable","document","documentElement","scrollHeight","innerHeight","Math","round","scrollY","addEventListener","removeEventListener","canScroll","style","width","concat","max"],"sourceRoot":""}