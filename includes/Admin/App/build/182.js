"use strict";(self.webpackChunksimplybook_app=self.webpackChunksimplybook_app||[]).push([[182],{9587:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(4848),n=a(640),r=a(1609),l=a(7723),i=(0,r.memo)((function(e){var t=e.label,a=e.context,r=e.help,i=e.error,s=e.reverseLabel,c=void 0!==s&&s,d=e.className,p=void 0===d?"":d,m=e.inputId,u=e.required,y=void 0!==u&&u,b=e.children,f=["flex w-full flex-col",p,"pt-4"].filter(Boolean).join(" "),g=["flex w-full flex-col",c?"flex-col-reverse":""].filter(Boolean).join(" ");return(0,o.jsxs)("div",{className:f,children:[(0,o.jsxs)("div",{className:g,children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)(n.b,{className:"cursor-pointer pb-1 font-medium text-black text-md",htmlFor:m,children:[t,y&&(0,o.jsxs)("span",{className:"ml-1 text-gray-500 font-normal text-xs",children:["(",(0,l.__)("Required","simplybook"),")"]})]}),r&&(0,o.jsx)("p",{className:"pb-1 text-xs font-light text-gray-600",children:r})]}),b]}),i&&(0,o.jsx)("p",{className:"mt-2 text-xs font-light text-red-600",role:"alert",children:i}),a&&(0,o.jsx)("p",{className:"mt-2 text-xs font-light text-gray-600",children:a})]})}));i.displayName="FieldWrapper";const s=i},8908:(e,t,a)=>{a.d(t,{A:()=>l});var o=a(4848),n=function(){return n=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)},r=function(e){var t=e.children,a=e.onClick,r=e.btnVariant,l=void 0===r?"secondary":r,i=e.disabled,s=void 0!==i&&i,c=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a}(e,["children","onClick","btnVariant","disabled"]),d="".concat("font-semibold py-2 px-6 rounded-full transition-all duration-200"," ").concat({primary:"bg-secondary text-white hover:bg-secondary-dark",secondary:"bg-tertiary text-white hover:bg-tertiary-dark",tertiary:"border-2 border-tertiary bg-transparent text-black hover:bg-tertiary-light"}[l]," ").concat(s?"opacity-50 cursor-not-allowed":"");return(0,o.jsx)("button",n({onClick:a,className:d,disabled:s},c,{children:t}))};r.displayName="ButtonInput";const l=r},6681:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(1455),n=a.n(o);const r=simplybook.nonce,l=i("site_url");function i(e){let t=simplybook[e];return"https:"!==window.location.protocol||t.includes("https://")||(t=t.replace("http://","https://")),t}i("ajax_url");const s=async(e,t="POST",a={})=>{const o={path:e,method:t,data:a};o.path="simplybook/v1/"+o.path+(l.includes("?")?"&":"?")+"&token="+Math.random().toString(36).substring(2,7),o.data={...a,nonce:r},"GET"===t&&console.log("the request method is not adjusted for GET requests yet. "),console.log("request : ",o);try{return await(async(e,t="POST",a={})=>{const o={path:e,method:t,data:a};return await n()(o)})(o.path,o.method,o.data)}catch(e){((e,t)=>{console.error(`API Error at ${t}:`,e.message||e)})(e,o.path)}}},1243:(e,t,a)=>{a.d(t,{A:()=>j});var o=a(1609),n=a(9785),r=a(4848),l=function(){return l=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l.apply(this,arguments)},i=(0,o.forwardRef)((function(e,t){var a=e.type,o=void 0===a?"text":a,n=e.className,i=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a}(e,["type","className"]);return(0,r.jsx)("input",l({ref:t,type:o,className:"w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(n||"")},i))}));i.displayName="TextInput";const s=i;var c=a(9587);a(5150);const d=(0,o.forwardRef)((({field:e,fieldState:t,label:a,help:n,context:r,className:l,...i},d)=>{const p=i.id||e.name;return(0,o.createElement)(c.A,{label:a,help:n,error:t?.error?.message,context:r,className:l,inputId:p,required:i.required},(0,o.createElement)(s,{id:p,type:"text","aria-invalid":!!t?.error?.message,...e,...i}))}));d.displayName="TextField";const p=d;var m=function(){return m=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},m.apply(this,arguments)},u=(0,o.forwardRef)((function(e,t){e.type,e.className;var a=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a}(e,["type","className"]);return(0,r.jsx)("input",m({ref:t,type:"hidden"},a))}));u.displayName="HiddenInput";const y=u,b=(0,o.forwardRef)((({field:e,fieldState:t,label:a,help:n,context:r,className:l,...i},s)=>{const c=i.id||e.name;return(0,o.createElement)(y,{...e,id:c,type:"hidden","aria-invalid":!!t?.error?.message,...i})}));b.displayName="HiddenField";const f=b;var g=function(){return g=Object.assign||function(e){for(var t,a=1,o=arguments.length;a<o;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},g.apply(this,arguments)},h=(0,o.forwardRef)((function(e,t){var a=e.type,o=void 0===a?"checkbox":a,n=e.className,l=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a}(e,["type","className"]);return(0,r.jsx)("input",g({ref:t,type:o,checked:!!l.value,className:"rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(n||"")},l))}));h.displayName="CheckboxInput";const x=h,v=(0,o.forwardRef)((({field:e,fieldState:t,label:a,help:n,context:r,className:l,...i},s)=>{const d=i.id||e.name;return(0,o.createElement)(c.A,{label:a,help:n,error:t?.error?.message,context:r,className:l,inputId:d,required:i.required},(0,o.createElement)(x,{...e,id:d,type:"checkbox","aria-invalid":!!t?.error?.message,...i}))}));v.displayName="CheckboxField";const k=v;var w=a(6244),S=a(7723);const O={text:p,api:p,hidden:f,checkbox:k},_=(0,o.memo)((({setting:e,control:t,...a})=>{if(!1===e.visible)return(0,o.createElement)("input",{type:"hidden",defaultValue:e.value||e.default});const r=O[e.type];if(!r)return(0,o.createElement)("div",{className:"w-full"},"Unknown field type: ",e.type," ",e.id);const l={...e.required&&{required:{value:!0,message:e.requiredMessage||(0,S.__)("This field is required","simplybook")}},...e.validation?.regex&&{pattern:{value:new RegExp(e.validation.regex),message:e.validation.message||(0,S.__)("Invalid format","simplybook")}},...e.min&&{min:e.min},...e.max&&{max:e.max},...e.minLength&&{minLength:e.minLength},...e.maxLength&&{maxLength:e.maxLength},...e.validate&&{validate:e.validate}};return(0,o.createElement)(w.A,null,(0,o.createElement)(n.xI,{name:e.id,control:t,rules:l,defaultValue:e.value||e.default,render:({field:t,fieldState:n})=>(0,o.createElement)(r,{field:t,fieldState:n,required:e.required,label:e.label||e.id,disabled:a.settingsIsUpdating||e.disabled,context:e.context,help:e.help,options:e.options,...a})}))}));_.displayName="FormField";const j=_},5809:(e,t,a)=>{a.d(t,{A:()=>y});var o=a(1609),n=a(2166),r=a(9785),l=a(9249),i=a(1243),s=a(8908),c=a(9587);const d=(0,o.forwardRef)((({field:e,label:t,help:a,context:n,className:r,...l},i)=>(0,o.createElement)(c.A,{help:a,context:n,className:r},(0,o.createElement)(s.A,{...e,...l},t))));d.displayName="ButtonField";const p=d;var m=a(7723);const u=({path:e,title:t,subtitle:a,rightColumn:s,bottomText:c,primaryButton:d={label:(0,m.__)("Next","simplybook")},secondaryButton:u=null})=>{const{getURLForStep:y,getCurrentStepId:b,getCurrentStep:f,updateData:g,data:h,defaultData:x,isLastStep:v}=(0,l.A)(),k=(0,n.Z)(),{handleSubmit:w,control:S,formState:{isDirty:O,errors:_}}=(0,r.mN)({defaultValues:x,values:h,mode:"onBlur"}),j=f(e),N=async(t,a="primary")=>{let o={...t};"primary"===a&&d.modifyData?o=d.modifyData(o):"secondary"===a&&u.modifyData&&(o=u.modifyData(o)),j.beforeSubmit&&j.beforeSubmit(o),g(o),"primary"===a&&d.navigateTo?k({to:d.navigateTo}):"secondary"===a&&u.navigateTo?k({to:u.navigateTo}):v(e)?k({to:"/"}):k({to:y(b(e)+1)})};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"col-span-4 col-start-3 my-12 flex flex-col text-black"},(0,o.createElement)("div",{className:"my-6 text-center"},(0,o.createElement)("h1",{className:"text-3xl font-semibold text-black"},t),a&&(0,o.createElement)("h2",{className:"mt-2 text-base font-light text-black"},a)),(0,o.createElement)("div",{className:"flex flex-col"},(0,o.createElement)("form",null,j.fields.map((e=>(0,o.createElement)(i.A,{setting:e,key:e.id,control:S}))),(0,o.createElement)(p,{btnVariant:"primary",label:d.label,context:c,onClick:w((e=>N(e,"primary")))}),u&&(0,o.createElement)(p,{btnVariant:"tertiary",label:u.label,onClick:w((e=>N(e,"secondary")))})))),(0,o.createElement)("div",{className:"col-span-4 col-start-7 row-span-2 my-12"},s))};u.displayName="OnboardingStep";const y=u},5150:(e,t,a)=>{a.d(t,{A:()=>i});var o=a(7665),n=a(9270),r=a(7097),l=a(6681);const i=()=>{const e=(0,o.jE)(),t=(0,n.I)({queryKey:["settings_fields"],queryFn:()=>(async({withValues:e=!0})=>(await(0,l.A)("settings/get_fields","POST",{withValues:e})).data)({withValues:!0}),staleTime:3e5,initialData:window.simplybook&&window.simplybook.settings_fields,retry:0,select:e=>[...e]}),{mutateAsync:a,isLoading:i}=(0,r.n)({mutationFn:async e=>(await new Promise((e=>setTimeout(e,1e3))),e),onSuccess:()=>{e.invalidateQueries(["settings_fields"])}});return{settings:t.data,saveSettings:a,getValue:e=>t.data.find((t=>t.id===e))?.value,setValue:(e,a)=>{const o=t.data.find((t=>t.id===e));o&&(o.value=a)},isSavingSettings:i,invalidateSettings:()=>e.invalidateQueries(["settings_fields"])}}},3182:(e,t,a)=>{a.r(t),a.d(t,{Route:()=>s});var o=a(1609),n=a(6037),r=a(7723),l=a(5809);const i="/onboarding/style-widget",s=(0,n.uV)(i)({component:()=>(0,o.createElement)(l.A,{path:i,title:(0,r.__)("Alpha Bedum Beauty & Welness","simplybook"),subtitle:(0,r.__)("What's your style?","simplybook"),buttonLabel:(0,r.__)("Next Step: Finish","simplybook"),rightColumn:(0,o.createElement)("p",null,"right")})})},9249:(e,t,a)=>{a.d(t,{A:()=>p});var o=a(1609);const n=e=>{let t;const a=new Set,o=(e,o)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=o?o:"object"!=typeof n||null===n)?n:Object.assign({},t,n),a.forEach((a=>a(t,e)))}},n=()=>t,r={setState:o,getState:n,getInitialState:()=>l,subscribe:e=>(a.add(e),()=>a.delete(e))},l=t=e(o,n,r);return r},r=e=>e,l=e=>{const t=(e=>e?n(e):n)(e),a=e=>function(e,t=r){const a=o.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return o.useDebugValue(a),a}(t,e);return Object.assign(a,t),a};var i=a(7723),s=a(6681);const c=(d=e=>{const t={},a=[{id:1,path:"/onboarding/create-your-account",fields:[{id:"email",type:"text",label:(0,i.__)("Email","simplybook"),required:!0,value:"",validation:{regex:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",message:(0,i.__)("Please enter a valid email address","simplybook")}},{id:"terms-and-conditions",type:"checkbox",label:(0,i.__)("I agree to the terms and conditions","simplybook")}],beforeSubmit:async e=>{console.log("submit email step"),await(async({data:e=!0})=>(console.log("calling registerEmail api",e),(await(0,s.A)("onboarding/register_email","POST",{data:e})).data))({data:e}),console.log(e)}},{id:2,path:"/onboarding/tips-and-tricks",fields:[{id:"tips-and-tricks",type:"checkbox"}],beforeSubmit:async e=>{console.log("submit tips and tricks step"),await(async({data:e=!0})=>(console.log("calling registerTipsTricks api",e),(await(0,s.A)("onboarding/tipstricks","POST",{data:e})).data))({data:e})}},{id:3,path:"/onboarding/information-check",fields:[{id:"company-name",type:"text",label:"Company name"},{id:"business-category",type:"text",label:(0,i.__)("Business category","simplybook")},{id:"services",type:"text",label:"Services"},{id:"address",type:"text",label:(0,i.__)("Address","simplybook")},{id:"phone",type:"text",label:(0,i.__)("Phone","simplybook")},{id:"zip",type:"text",label:(0,i.__)("Postal Code","simplybook")},{id:"city",type:"text",label:(0,i.__)("City","simplybook")},{id:"country",type:"text",label:(0,i.__)("Country","simplybook")}],beforeSubmit:async e=>{console.log("submit information check step"),console.log(e),await(async({data:e=!0})=>(console.log("calling registerCompany api",e),(await(0,s.A)("onboarding/company_registration","POST",{data:e})).data))({data:e})}},{id:4,path:"/onboarding/confirm-email",fields:[{id:"confirmation-code",type:"text",label:(0,i.__)("Confirmation Code","simplybook")}],beforeSubmit:async e=>{e.recaptchaToken=c.getState().recaptchaToken,console.log("confirm email step"),console.log(e),await(async({data:e=!0})=>{console.log("calling confirmEmail api",e);const t=await(0,s.A)("onboarding/confirm_email","POST",{data:e});return console.log("confirmEmail response",t),t.data})({data:e})}},{id:5,path:"/onboarding/style-widget",fields:[{id:"widget-color-simple",type:"text"}],beforeSubmit:e=>{console.log("submit widget step"),console.log(e)}},{id:6,path:"/onboarding/implementation",fields:[],beforeSubmit:e=>{console.log("submit implementation step"),console.log(e)}}];a.forEach((e=>{e.fields.forEach((e=>{t[e.id]=""}))}));let o={};return Object.keys(t).forEach((e=>{o[e]=simplybook.company_data.hasOwnProperty(e)?simplybook.company_data[e]:""})),{steps:a,data:o,defaultData:t,updateData:t=>{e((e=>({data:{...e.data,...t}})))},getCurrentStepId:e=>c.getState().steps.find((t=>t.path===e)).id,recaptchaToken:"",setRecaptchaToken:t=>{e({recaptchaToken:t})},getCurrentStep:e=>c.getState().steps.find((t=>t.path===e)),getURLForStep:e=>c.getState().steps[e-1].path,isLastStep:e=>c.getState().steps.length===c.getState().getCurrentStepId(e)}})?l(d):l;var d;const p=c}}]);