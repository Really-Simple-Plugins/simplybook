"use strict";(globalThis.webpackChunksimplybook_app=globalThis.webpackChunksimplybook_app||[]).push([[15],{1674:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(790),o=a(1609),r=a(4164),l=(0,o.memo)((function(e){var t=e.className,a=void 0===t?"":t,o=e.children;return(0,n.jsx)("div",{className:(0,r.A)(a,"bg-white shadow-md rounded-xl flex flex-col"),children:o})}));l.displayName="Block";const i=l},9587:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(790),o=a(5920),r=a(1609),l=a(7723),i=(0,r.memo)((function(e){var t=e.label,a=e.context,r=e.help,i=e.error,s=e.reverseLabel,c=void 0!==s&&s,d=e.className,u=void 0===d?"":d,m=e.inputId,p=e.required,g=void 0!==p&&p,f=e.type,b=void 0===f?"text":f,y=e.children,h=["flex w-full flex-col",u,"pt-4"].filter(Boolean).join(" "),v=["flex w-full flex-col",c?"flex-col-reverse":""].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:h,children:[(0,n.jsxs)("div",{className:v,children:["checkbox"===b&&y,(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(o.b,{className:"cursor-pointer pb-1 font-medium text-black text-md ",htmlFor:m,children:[t,g&&(0,n.jsxs)("span",{className:"ml-1 text-gray-500 font-normal text-xs",children:["(",(0,l.__)("Required","simplybook"),")"]})]}),r&&(0,n.jsx)("p",{className:"pb-1 text-xs font-light text-gray-600",children:r})]}),"checkbox"!==b&&y]}),i&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-red-600",role:"alert",children:i}),a&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-gray-600",children:a})]})}));i.displayName="FieldWrapper";const s=i},8908:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(790),o=a(9681),r=a(4164),l=function(e){var t=e.children,a=e.onClick,l=e.link,i=e.btnVariant,s=void 0===i?"secondary":i,c=e.disabled,d=void 0!==c&&c,u=(e.showLoader,e.size),m=void 0===u?"md":u,p=e.className,g=void 0===p?"":p,f=(0,r.$)("rounded-full transition-all duration-200 ",{"bg-secondary text-white hover:bg-secondary-dark ":"primary"===s,"bg-tertiary text-white hover:bg-tertiary-dark ":"secondary"===s,"border-2 border-tertiary bg-transparent text-black hover:bg-tertiary-light ":"tertiary"===s},{"py-.5 px-3 font-normal text-xs border-1 ":"sm"===m,"py-2 px-6 font-semibold ":"md"===m,"py-3 px-8 text-lg font-semibold ":"lg"===m},{"opacity-50 cursor-not-allowed ":d});return g.length>0&&(f=f+" "+g),l?(0,n.jsx)(o.N_,{to:l.to,className:f,children:t}):(0,n.jsx)("button",{onClick:a,className:f,disabled:d,children:t})};l.displayName="ButtonInput";const i=l},359:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(790),o=a(1609),r=a.n(o),l=a(7723),i=function(){return i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},s=(0,o.forwardRef)((function(e,t){var a=e.type,o=void 0===a?"text":a,s=e.className,c=e.clickToSelect,d=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["type","className","clickToSelect"]),u=r().useState(""),m=u[0],p=u[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",i({ref:t,type:o,className:"w-full rounded-md border border-gray-300 p-2 focus:border-tertiary focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(s||""),onClick:function(e){c&&(e.target.select(),document.execCommand("copy"),p((0,l.__)("Copied!","simplybook")),setTimeout((function(){p("")}),2e3))}},d)),m&&(0,n.jsx)("span",{className:"text-green-500 -mt-4",children:m})]})}));s.displayName="TextInput";const c=s},6681:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(1455),o=a.n(n);const r=simplybook.nonce,l=i("rest_url");function i(e){let t=simplybook[e];return"https:"!==window.location.protocol||t.includes("https://")||(t=t.replace("http://","https://")),t}i("ajax_url");const s=async(e,t="POST",a={})=>{const n={path:e,method:t,data:a};n.path="simplybook/v1/"+n.path+(l.includes("?")?"&":"?")+"&token="+Math.random().toString(36).substring(2,7),n.data={...a,nonce:r},"GET"===t&&console.log("the request method is not adjusted for GET requests yet. ");try{return await(async(e,t="POST",a={})=>{const n={path:e,method:t,data:a};return await o()(n)})(n.path,n.method,n.data)}catch(e){((e,t)=>{console.error(`API Error at ${t}:`,e.message||e)})(e,n.path)}}},5071:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(1728),o=a(4164);const r=e=>{const t=(0,n.c)(5),{children:a,className:r}=e,l=void 0===r?"":r;let i,s;return t[0]!==l?(i=(0,o.A)(l,"p-5 flex-grow"),t[0]=l,t[1]=i):i=t[1],t[2]!==a||t[3]!==i?(s=React.createElement("div",{className:i},a),t[2]=a,t[3]=i,t[4]=s):s=t[4],s};r.displayName="BlockContent";const l=r},7330:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(1728),o=a(4164);const r=e=>{const t=(0,n.c)(8),{title:a,controls:r,className:l}=e,i=void 0===l?"":l;let s,c,d;return t[0]!==i?(s=(0,o.A)(i,"flex items-center justify-between px-5 py-4"),t[0]=i,t[1]=s):s=t[1],t[2]!==a?(c=React.createElement("h2",{className:"text-base font-bold"},a),t[2]=a,t[3]=c):c=t[3],t[4]!==r||t[5]!==s||t[6]!==c?(d=React.createElement("div",{className:s},c,r),t[4]=r,t[5]=s,t[6]=c,t[7]=d):d=t[7],d};r.displayName="BlockHeading";const l=r},1577:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(1728),o=a(982),r=a(6188);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(null,arguments)}const i={"square-arrow-up-right":r.fLi,spinner:r.z1G,"chevron-down":r.Jt$,"chevron-up":r.w2A,check:r.e68,info:r.iW_,times:r.GRI,trophy:r.iHh,"user-group":r.USd,eye:r.pS3,bullhorn:r.e4L,clock:r.a$,circle:r.GEE,cart:r._Ro},s=e=>{const t=(0,n.c)(18);let a,s,c,d,u;t[0]!==e?(({name:a,color:c,size:d,className:u,...s}=e),t[0]=e,t[1]=a,t[2]=s,t[3]=c,t[4]=d,t[5]=u):(a=t[1],s=t[2],c=t[3],d=t[4],u=t[5]);const m=void 0===c?"black":c,p=void 0===d?"1x":d,g=void 0===u?"":u;let f=i[a];f||(console.warn(`Icon "${a}" does not exist in iconMap.`),f=r.GEE);const b="spinner"===a;let y,h,v;return t[6]!==a?(y="spinner"===a&&{animationDuration:"2s"},t[6]=a,t[7]=y):y=t[7],t[8]!==m||t[9]!==y?(h={color:m,...y},t[8]=m,t[9]=y,t[10]=h):h=t[10],t[11]!==g||t[12]!==f||t[13]!==s||t[14]!==p||t[15]!==b||t[16]!==h?(v=React.createElement(o.g,l({icon:f,size:p,spin:b,className:g,style:h},s)),t[11]=g,t[12]=f,t[13]=s,t[14]=p,t[15]=b,t[16]=h,t[17]=v):v=t[17],v}},9347:(e,t,a)=>{a.d(t,{A:()=>y});var n=a(1728),o=a(1609),r=a.n(o),l=a(1577),i=a(8908),s=a(2986),c=a(7665),d=a(9270),u=a(6681);const m=async()=>{const e=await(0,u.A)("get_login_url","POST");return e&&e.data.url?e.data:{url:"",login_url:""}};var p=function(e,t,a,n){return new(a||(a=Promise))((function(o,r){function l(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,i)}s((n=n.apply(e,t||[])).next())}))},g=function(e,t){var a,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(r=0)),r;)try{if(a=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],n=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},f={url:"",login_url:""};const b=e=>{const t=(0,n.c)(25),{className:a,page:u,isButton:b,size:y,btnVariant:h,children:v}=e,_=void 0!==b&&b,x=void 0===y?"md":y,{alreadyLoggedIn:w,setAlreadyLoggedIn:k,directUrl:N,loginUrl:S,loginUrlFetched:E,fetchLinkData:j}=function(){var e,t,a=(0,c.jE)(),n=(0,o.useState)(!1),r=n[0],l=n[1],i=(0,s.A)().onboardingCompleted,u=(0,d.I)({queryKey:["login_data"],queryFn:function(){return p(void 0,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:return i?[4,m()]:[2,f];case 1:return e=t.sent(),console.log("getLoginUrl response",e),[2,e]}}))}))},staleTime:36e5,retry:0,enabled:!1,initialData:f,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return{loginData:u.data,loginUrlFetched:u.isFetched,loginUrlIsFetching:u.isFetching,directUrl:null===(e=u.data)||void 0===e?void 0:e.url,loginUrl:null===(t=u.data)||void 0===t?void 0:t.login_url,alreadyLoggedIn:r,setAlreadyLoggedIn:l,fetchLinkData:function(){return p(void 0,void 0,void 0,(function(){var e;return g(this,(function(t){switch(t.label){case 0:return[4,u.refetch()];case 1:return e=t.sent(),a.setQueryData(["login_data"],e.data),console.log("queried data",e.data),[2,e.data]}}))}))}}}(),{onboardingCompleted:R}=(0,s.A)();let O;t[0]!==w||t[1]!==N||t[2]!==j||t[3]!==S||t[4]!==E||t[5]!==k?(O=async(e,t)=>{e.preventDefault();let a=w?N:S;if(console.log("Get login URL for",t),E)console.log("already fetched");else{console.log("not fetched yet");const e=await j();console.log("logindata response after promise",e),a=w?e.url:e.login_url}console.log("Already logged in",w),console.log("all data ",a);const n=w?`${a}/${t}`:`${a}?back_url=/${t}/`;console.log("Final URL",n),k(!0),window.open(n,"_blank"),window.focus()},t[0]=w,t[1]=N,t[2]=j,t[3]=S,t[4]=E,t[5]=k,t[6]=O):O=t[6];const A=O,P=R?"":"pointer-events-none opacity-50 cursor-not-allowed",C=`${P}${a} `;if(_){const e=!R;let a,n;return t[7]!==A||t[8]!==u?(a=e=>A(e,u),t[7]=A,t[8]=u,t[9]=a):a=t[9],t[10]!==h||t[11]!==v||t[12]!==C||t[13]!==x||t[14]!==e||t[15]!==a?(n=r().createElement(i.A,{disabled:e,label:v,onClick:a,className:C,btnVariant:h,size:x},v),t[10]=h,t[11]=v,t[12]=C,t[13]=x,t[14]=e,t[15]=a,t[16]=n):n=t[16],n}const F=`${a} ${P}`;let I,q,L;return t[17]!==A||t[18]!==u?(I=e=>A(e,u),t[17]=A,t[18]=u,t[19]=I):I=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(q=r().createElement(l.A,{name:"square-arrow-up-right",className:"px-2"}),t[20]=q):q=t[20],t[21]!==v||t[22]!==F||t[23]!==I?(L=r().createElement("a",{href:"#",className:F,onClick:I},v,q),t[21]=v,t[22]=F,t[23]=I,t[24]=L):L=t[24],L};b.displayName="LoginLink";const y=b},9073:(e,t,a)=>{a.d(t,{A:()=>se});var n=a(9785),o=a(1728),r=a(1609),l=a.n(r),i=a(359),s=a(9587),c=a(4441);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(null,arguments)}const u=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(21);let n,r,l,c,u,m,p;a[0]!==e?(({setting:p,fieldState:l,label:u,help:c,context:r,className:n,...m}=e),a[0]=e,a[1]=n,a[2]=r,a[3]=l,a[4]=c,a[5]=u,a[6]=m,a[7]=p):(n=a[1],r=a[2],l=a[3],c=a[4],u=a[5],m=a[6],p=a[7]);const g=p.id,f=l?.error?.message,b=!!l?.error?.message;let y,h;return a[8]!==g||a[9]!==m||a[10]!==b?(y=React.createElement(i.A,d({id:g,type:"text","aria-invalid":b},m)),a[8]=g,a[9]=m,a[10]=b,a[11]=y):y=a[11],a[12]!==n||a[13]!==r||a[14]!==c||a[15]!==g||a[16]!==u||a[17]!==m.required||a[18]!==f||a[19]!==y?(h=React.createElement(s.A,{label:u,help:c,error:f,context:r,className:n,inputId:g,required:m.required},y),a[12]=n,a[13]=r,a[14]=c,a[15]=g,a[16]=u,a[17]=m.required,a[18]=f,a[19]=y,a[20]=h):h=a[20],h}));u.displayName="TextField";const m=u;var p=a(790),g=function(){return g=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},f=(0,r.forwardRef)((function(e,t){e.type,e.className;var a=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["type","className"]);return(0,p.jsx)("input",g({ref:t,type:"hidden"},a))}));f.displayName="HiddenInput";const b=f;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y.apply(null,arguments)}const h=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(10);let n,r,l,i;if(a[0]!==e){const{setting:t,field:o,fieldState:s,label:c,help:d,context:u,className:m,...p}=e;i=t,n=o,r=s,l=p,a[0]=e,a[1]=n,a[2]=r,a[3]=l,a[4]=i}else n=a[1],r=a[2],l=a[3],i=a[4];const s=!!r?.error?.message;let c;return a[5]!==n||a[6]!==l||a[7]!==i.id||a[8]!==s?(c=React.createElement(b,y({},n,{id:i.id,type:"hidden","aria-invalid":s},l)),a[5]=n,a[6]=l,a[7]=i.id,a[8]=s,a[9]=c):c=a[9],c}));h.displayName="HiddenField";const v=h;var _=function(){return _=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},x=(0,r.forwardRef)((function(e,t){var a=e.label,n=e.className,o=e.checked,r=(e.value,e.onChange),l=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["label","className","checked","value","onChange"]),i=a&&0!==a.length?"1":"0.5";return(0,p.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,p.jsx)("input",_({type:"checkbox",checked:o,onChange:r,className:"sr-only peer"},l)),(0,p.jsx)("div",{className:"w-8 h-4 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-600 peer-checked:after:translate-x-4 peer-checked:after:border-white after:content-[''] after:absolute after:top-"+i+" after:left-0.5 after:bg-white after:border-gray-300 after:border after:rounded-full after:h-3 after:w-3 after:transition-all"}),(0,p.jsx)("span",{className:"ml-2 font-medium text-black text-md ".concat(n||""),children:a})]})}));x.displayName="CheckboxInput";const w=x;function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},k.apply(null,arguments)}const N=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(21);let n,r,l,i,c,d,u;a[0]!==e?(({setting:u,fieldState:l,label:c,help:i,context:r,className:n,...d}=e),a[0]=e,a[1]=n,a[2]=r,a[3]=l,a[4]=i,a[5]=c,a[6]=d,a[7]=u):(n=a[1],r=a[2],l=a[3],i=a[4],c=a[5],d=a[6],u=a[7]);const m=u.id,p=l?.error?.message,g=!!l?.error?.message;let f,b;return a[8]!==m||a[9]!==c||a[10]!==d||a[11]!==g?(f=React.createElement(w,k({label:c,id:m,"aria-invalid":g},d)),a[8]=m,a[9]=c,a[10]=d,a[11]=g,a[12]=f):f=a[12],a[13]!==n||a[14]!==r||a[15]!==i||a[16]!==m||a[17]!==d.required||a[18]!==p||a[19]!==f?(b=React.createElement(s.A,{label:"",help:i,error:p,context:r,className:n,inputId:m,required:d.required,type:"checkbox"},f),a[13]=n,a[14]=r,a[15]=i,a[16]=m,a[17]=d.required,a[18]=p,a[19]=f,a[20]=b):b=a[20],b}));N.displayName="CheckboxField";const S=N;var E=a(5035),j=a(1577),R=function(){return R=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)};const O=l().forwardRef((function(e,t){var a=e.value,n=e.onChange,o=e.options,r=void 0===o?[]:o,l=(e.setting,Array.isArray(r)?r:Object.keys(r).map((function(e){return{value:e,label:r[e]}})));return(0,p.jsxs)(E.bL,{value:a,onValueChange:n,children:[(0,p.jsxs)(E.l9,{ref:t,className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-2 focus:border-tertiary focus:outline-none focus:ring",children:[(0,p.jsx)(E.WT,{placeholder:"Select an option…"}),(0,p.jsx)(E.In,{className:"ml-2",children:(0,p.jsx)(j.A,{name:"chevron-down"})})]}),(0,p.jsx)(E.ZL,{children:(0,p.jsxs)(E.UC,{style:{width:"100%",borderRadius:"0.375rem",borderWidth:"1px",borderColor:"#D1D5DB",backgroundColor:"white",zIndex:50,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",transitionProperty:"all",transitionTimingFunction:"ease-in-out",transitionDuration:"200ms"},className:"rounded-md border border-gray-300 bg-white z-50 shadow-lg transition ease-in-out duration-200",children:[(0,p.jsx)(E.PP,{className:"flex items-center justify-center p-2",style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0.5rem"},children:(0,p.jsx)(j.A,{name:"chevron-up"})}),(0,p.jsx)(E.LM,{className:"p-2 bg-white",children:l.map((function(e){return(0,p.jsx)(A,{value:e.value,children:e.label},e.value)}))}),(0,p.jsx)(E.wn,{className:"flex items-center justify-center p-2",style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"0.5rem"},children:(0,p.jsx)(j.A,{name:"chevron-down"})})]})})]})}));var A=l().forwardRef((function(e,t){var a=e.children,n=e.className,o=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a}(e,["children","className"]);return(0,p.jsxs)(E.q7,R({ref:t,className:"flex cursor-pointer items-center justify-between bg-white shadow-lg rounded-md p-2 hover:bg-gray-100 focus:bg-gray-200 ".concat(n),style:{display:"flex",cursor:"pointer",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",borderRadius:"0.375rem",padding:"0.5rem",width:"100%"}},o,{children:[(0,p.jsx)(E.p4,{children:a}),(0,p.jsx)(E.VF,{className:"ml-2",children:(0,p.jsx)(j.A,{name:"check"})})]}))})),P=a(6681);function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},C.apply(null,arguments)}const F=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(24);let n,r,l,i,c,d,u,m;a[0]!==e?(({setting:m,fieldState:l,label:c,help:i,context:r,className:n,options:d,...u}=e),a[0]=e,a[1]=n,a[2]=r,a[3]=l,a[4]=i,a[5]=c,a[6]=d,a[7]=u,a[8]=m):(n=a[1],r=a[2],l=a[3],i=a[4],c=a[5],d=a[6],u=a[7],m=a[8]);const p=m.id,g=l?.error?.message,f=!!l?.error?.message;let b,y;return a[9]!==p||a[10]!==d||a[11]!==u||a[12]!==m||a[13]!==f?(b=React.createElement(O,C({value:m.value,id:p,options:d,"aria-invalid":f,setting:m},u)),a[9]=p,a[10]=d,a[11]=u,a[12]=m,a[13]=f,a[14]=b):b=a[14],a[15]!==n||a[16]!==r||a[17]!==i||a[18]!==p||a[19]!==c||a[20]!==u.required||a[21]!==g||a[22]!==b?(y=React.createElement(s.A,{label:c,help:i,error:g,context:r,className:n,inputId:p,required:u.required},b),a[15]=n,a[16]=r,a[17]=i,a[18]=p,a[19]=c,a[20]=u.required,a[21]=g,a[22]=b,a[23]=y):y=a[23],y}));F.displayName="SelectField";const I=F;var q=a(6244),L=a(7723),T=a(5189),D=(0,r.forwardRef)((function(e,t){var a=e.colorValue,n=void 0===a?"#ffffff":a,o=e.onChangeComplete,l=(0,r.useState)(n),i=l[0],s=l[1];return(0,p.jsx)("div",{ref:t,children:(0,p.jsx)(T.xk,{color:i,onChange:function(e){s(e.hex)},onChangeComplete:function(e){return null==o?void 0:o(e.hex)},disableAlpha:!0})})}));D.displayName="ColorPicker";const B=D;var V=a(5397),U=a(7493);const $=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(34);let n,l,i,c,d,u,m,p;if(a[0]!==e){const{setting:t,fieldState:o,label:r,help:s,context:g,className:f,onChange:b,defaultValue:y,...h}=e;p=t,i=o,d=r,c=s,l=g,n=f,u=b,m=h,a[0]=e,a[1]=n,a[2]=l,a[3]=i,a[4]=c,a[5]=d,a[6]=u,a[7]=m,a[8]=p}else n=a[1],l=a[2],i=a[3],c=a[4],d=a[5],u=a[6],m=a[7],p=a[8];const g=p.value||p.default,{isPolling:f}=(0,U.A)(),[b,y]=(0,r.useState)(!1),[h,v]=(0,r.useState)(g);let _,x,w;a[9]!==h||a[10]!==m.value?(_=()=>{m.value!==h&&v(m.value)},a[9]=h,a[10]=m.value,a[11]=_):_=a[11],a[12]!==m.value?(x=[m.value],a[12]=m.value,a[13]=x):x=a[13],(0,r.useEffect)(_,x),a[14]!==f?(w=e=>{f||y(e)},a[14]=f,a[15]=w):w=a[15];const k=w;let N;a[16]!==h||a[17]!==k||a[18]!==u||a[19]!==b||a[20]!==p.disabled?(N=e=>{const{label:t}=e,a=p.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer";return React.createElement(V.bL,{open:b,onOpenChange:k},React.createElement(V.l9,{className:"p-[5px] mr-2 bg-transparent rounded-md border border-gray-400 min-w-[140px] text-sm"},React.createElement("div",{className:a+" min-w-5 flex p-1.5 gap-3.5 items-center"},React.createElement("div",{className:"rounded-full min-w-5 h-5 border border-gray-300",style:{backgroundColor:h}}),t)),React.createElement(V.ZL,null,React.createElement(V.UC,null,React.createElement(B,{colorValue:h,onChangeComplete:(e,t)=>{v(e),u(e)}}))))},a[16]=h,a[17]=k,a[18]=u,a[19]=b,a[20]=p.disabled,a[21]=N):N=a[21];const S=N,E=i?.error?.message;let j,R;return a[22]!==S||a[23]!==d||a[24]!==p?(j=React.createElement("div",{className:""},React.createElement(S,{setting:p,label:d})),a[22]=S,a[23]=d,a[24]=p,a[25]=j):j=a[25],a[26]!==n||a[27]!==l||a[28]!==c||a[29]!==m.required||a[30]!==p.id||a[31]!==E||a[32]!==j?(R=React.createElement(s.A,{label:"",help:c,error:E,context:l,className:n,inputId:p.id,required:m.required},j),a[26]=n,a[27]=l,a[28]=c,a[29]=m.required,a[30]=p.id,a[31]=E,a[32]=j,a[33]=R):R=a[33],R}));$.displayName="ColorPickerField";const G=$;var z=a(9347);const Q=function(e){var t=e.options,a=e.value,n=e.onChange;return(0,p.jsx)("div",{className:"flex gap-4",children:t.map((function(e){return(0,p.jsxs)("button",{onClick:function(t){return function(e,t,a){e.preventDefault(),a.is_premium||n(t)}(t,e.value,e)},className:"relative flex flex-col items-center justify-center p-4 rounded-lg border  text-center \n            transition duration-300 ease-in-out \n            ".concat(e.is_premium?"bg-gray-200 border-gray-200 text-gray-400 cursor-not-allowed":a===e.value?"bg-blue-50 border-blue-500 cursor-pointer":"bg-gray-100 hover:bg-gray-200 border-gray-300 cursor-pointer"),children:[(0,p.jsx)("span",{className:"text-lg font-medium",children:e.label}),e.description&&(0,p.jsx)("span",{className:"text-sm text-gray-500 mt-1",children:e.description}),e.is_premium&&(0,p.jsx)("span",{className:"absolute -top-3 -right-5 cursor-pointer",children:(0,p.jsx)(z.A,{className:"cursor-pointer",isButton:!0,btnVariant:"premium",page:"client",children:(0,L.__)("Premium","simplybook")})})]},e.value)}))})};function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},M.apply(null,arguments)}var H=a(7665),K=a(9270);function W(){return(async()=>{const e=await(0,P.A)("services","POST");return e&&e.data?(console.log("getServices response ",e),e.data):(console.log("no services found"),[])})()}function Z(e){return[...e]}const Y=async()=>{const e=await(0,P.A)("get_domain","POST");return e&&e.data.domain?e.data.domain:""};var J=a(2986);const X=function(){var e,t,a=(0,J.A)().onboardingCompleted,n=(0,K.I)({queryKey:["domain_data"],queryFn:function(){return e=void 0,t=void 0,o=function(){var e;return function(e,t){var a,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(r=0)),r;)try{if(a=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],n=0}finally{a=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return a?[4,Y()]:[2,""];case 1:return e=t.sent(),console.log("getdomain response",e),[2,e]}}))},new((n=void 0)||(n=Promise))((function(a,r){function l(e){try{s(o.next(e))}catch(e){r(e)}}function i(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}s((o=o.apply(e,t||[])).next())}));var e,t,n,o},staleTime:36e5,retry:0,enabled:!!a});return{domain:n.data,domainFetched:(null!==(t=null===(e=n.data)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0}},ee=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(36),{upgrade:n,link:l,item:i,label:s}=e,[c,d]=(0,r.useState)(!!i?.is_visible||!1);let u;a[0]!==i.id?(u=e=>{console.log("onChange",e.target.checked,"for id ",i.id),d(e.target.checked)},a[0]=i.id,a[1]=u):u=a[1];const m=u,{domain:p,domainFetched:g}=X(),f=g&&i.picture_preview&&i.picture_preview.length>0;let b;a[2]!==s||a[3]!==n?(b=n?" |  "+(0,L.sprintf)((0,L.__)("Get unlimited %s","simplybook"),s):(0,L.__)("Edit","simplybook"),a[2]=s,a[3]=n,a[4]=b):b=a[4];const y=b;let h,v,_,x,k,N,S,E,R,O;return a[5]!==p||a[6]!==f||a[7]!==i.picture_preview?(h=f&&React.createElement("img",{className:"w-15 h-15 max-w-[40px] max-h-[40px]",src:p+i.picture_preview,alt:i.picture_preview}),a[5]=p,a[6]=f,a[7]=i.picture_preview,a[8]=h):h=a[8],a[9]!==f?(v=!f&&React.createElement("div",{className:"min-w-[40px] min-h-[40px] flex items-center justify-center"},React.createElement(j.A,{name:"cart"})),a[9]=f,a[10]=v):v=a[10],a[11]!==h||a[12]!==v?(_=React.createElement("div",null,h,v),a[11]=h,a[12]=v,a[13]=_):_=a[13],a[14]!==i.name?(x=React.createElement("div",{className:"font-bold"},i.name),a[14]=i.name,a[15]=x):x=a[15],a[16]!==y||a[17]!==l?(k=React.createElement(z.A,{page:l},y),a[16]=y,a[17]=l,a[18]=k):k=a[18],a[19]!==_||a[20]!==x||a[21]!==k?(N=React.createElement("div",{className:"flex items-center space-x-3"},_,x,k),a[19]=_,a[20]=x,a[21]=k,a[22]=N):N=a[22],a[23]!==i.id||a[24]!==m||a[25]!==n||a[26]!==c?(S=!n&&React.createElement(w,{label:"",id:i.id,checked:c,onChange:e=>m(e)}),a[23]=i.id,a[24]=m,a[25]=n,a[26]=c,a[27]=S):S=a[27],a[28]!==n?(E=n&&React.createElement(React.Fragment,null,React.createElement("span",{className:"inline-block w-[100px] text-center px-3 py-1.5 rounded-md text-xs font-medium bg-tertiary text-white"},(0,L.__)("Upgrade","simplybook"))),a[28]=n,a[29]=E):E=a[29],a[30]!==E||a[31]!==S?(R=React.createElement("div",{className:"flex items-center"},React.createElement("div",{className:"ml-4 relative"},S,E)),a[30]=E,a[31]=S,a[32]=R):R=a[32],a[33]!==R||a[34]!==N?(O=React.createElement(React.Fragment,null,React.createElement("div",{className:"w-full flex items-center justify-between px-4 py-5 bg-gray-100 mb-4"},N,R)),a[33]=R,a[34]=N,a[35]=O):O=a[35],O}));ee.displayName="ListItem";const te=ee;function ae(){return(async()=>{const e=await(0,P.A)("providers","POST");return e&&e.data?(console.log("getProviders response ",e),e.data):(console.log("no Providers found"),[])})()}function ne(e){return[...e]}const oe=(0,r.forwardRef)(((e,t)=>{const a=(0,o.c)(27),{setting:n,label:l}=e,{services:i}=(()=>{const e=(0,o.c)(3);let t;(0,H.jE)(),e[0]===Symbol.for("react.memo_cache_sentinel")?(t={queryKey:["services"],queryFn:W,staleTime:3e5,retry:0,select:Z},e[0]=t):t=e[0];const a=(0,K.I)(t);let n;return e[1]!==a.data?(n={services:a.data},e[1]=a.data,e[2]=n):n=e[2],n})(),{providers:s}=(()=>{const e=(0,o.c)(3);let t;(0,H.jE)(),e[0]===Symbol.for("react.memo_cache_sentinel")?(t={queryKey:["providers"],queryFn:ae,staleTime:3e5,retry:0,select:ne},e[0]=t):t=e[0];const a=(0,K.I)(t);let n;return e[1]!==a.data?(n={providers:a.data},e[1]=a.data,e[2]=n):n=e[2],n})();let c;a[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],a[0]=c):c=a[0];const[d,u]=(0,r.useState)(c);let m;a[1]!==s||a[2]!==i?(m={services:i,providers:s},a[1]=s,a[2]=i,a[3]=m):m=a[3];const p=m;let g;a[4]!==n.source||a[5]!==p?(g=()=>{console.log("loading listArray for ",n.source),u(p[n.source])},a[4]=n.source,a[5]=p,a[6]=g):g=a[6];const f=p[n.source];let b,y;if(a[7]!==f?(b=[f],a[7]=f,a[8]=b):b=a[8],(0,r.useEffect)(g,b),!d){let e;return a[9]===Symbol.for("react.memo_cache_sentinel")?(e=React.createElement(React.Fragment,null,(0,L.__)("Loading, please wait a few seconds...")),a[9]=e):e=a[9],e}if(console.log("listArray for ",n.source,d),!Array.isArray(d)){let e,t;return a[10]!==n.label?(e=(0,L.sprintf)((0,L.__)("No items found for %s"),n.label),a[10]=n.label,a[11]=e):e=a[11],a[12]!==e?(t=React.createElement(React.Fragment,null,e),a[12]=e,a[13]=t):t=a[13],t}a[14]===Symbol.for("react.memo_cache_sentinel")?(y={id:"upgrade",name:(0,L.__)("Want more services?"),picture_preview:""},a[14]=y):y=a[14];const h=y;let v,_,x;if(a[15]!==l||a[16]!==d||a[17]!==n.link){let e;a[19]!==l||a[20]!==n.link?(e=e=>React.createElement(te,{upgrade:!1,key:e.id+e.source,label:l,link:n.link,item:e}),a[19]=l,a[20]=n.link,a[21]=e):e=a[21],v=d.map(e),a[15]=l,a[16]=d,a[17]=n.link,a[18]=v}else v=a[18];return a[22]!==l?(_=React.createElement(te,{upgrade:!0,label:l,link:"r/payment-widget",item:h}),a[22]=l,a[23]=_):_=a[23],a[24]!==v||a[25]!==_?(x=React.createElement("div",{className:"w-full"},v,_),a[24]=v,a[25]=_,a[26]=x):x=a[26],x}));function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},re.apply(null,arguments)}oe.displayName="ListField";const le={text:m,api:m,hidden:v,checkbox:S,select:I,colorpicker:G,implementation:e=>{const t=(0,o.c)(17);let a,n,r,l;t[0]!==e?(({options:n,value:l,onChange:a,...r}=e),t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=l):(a=t[1],n=t[2],r=t[3],l=t[4]);const i=r.setting&&r.setting.default?r.setting.default:"",s=l||i,{setValue:d,invalidateSettings:u}=(0,c.A)();let m;t[5]!==u||t[6]!==a||t[7]!==r.setting.id||t[8]!==d?(m=async e=>{await d(r.setting.id,e),console.log("invalidate Settings from implementation"),await u(),a(e)},t[5]=u,t[6]=a,t[7]=r.setting.id,t[8]=d,t[9]=m):m=t[9];const p=m;let g,f;return t[10]!==p?(g=e=>p(e),t[10]=p,t[11]=g):g=t[11],t[12]!==s||t[13]!==n||t[14]!==r||t[15]!==g?(f=React.createElement("div",{className:"p-6"},React.createElement(Q,M({options:n,value:s,onChange:g},r))),t[12]=s,t[13]=n,t[14]=r,t[15]=g,t[16]=f):f=t[16],f},list:oe},ie=(0,r.memo)((({setting:e,control:t,...a})=>{if(!1===e.visible)return React.createElement("input",{type:"hidden",defaultValue:e.value||e.default});const o=le[e.type],{saveSettings:l,setValue:i,getValue:s,settings:d}=(0,c.A)();if(!o)return React.createElement("div",{className:"w-full"},"Unknown field type: ",e.type," ",e.id);const u={...e.required&&{validate:{required:e=>!!e||(0,L.__)("This field is required","simplybook")}},...e.validation?.regex&&{pattern:{value:new RegExp(e.validation.regex),message:e.validation.message||(0,L.__)("Invalid format","simplybook")}},...e.min&&{min:e.min},...e.max&&{max:e.max},...e.minLength&&{minLength:e.minLength},...e.maxLength&&{maxLength:e.maxLength},...e.validate&&{validate:e.validate}};let m=e.value||e.default;return"checkbox"===e.type&&(m="1"===m||!0===m||1===m),React.createElement(q.A,null,React.createElement(n.xI,{name:e.id,control:t,rules:u,defaultValue:m,render:({field:t,fieldState:n})=>((0,r.useEffect)((()=>{s(e.id)!==t.value&&e.save_on_change&&t.value.length>0&&(console.log("saving field on change",e.id,t.value),(async t=>{console.log("handleSaveOnChange",e.id,t),i(e.id,t),console.log("new settings array ",d),e.mapping&&e.mapping.forEach((e=>{i(e,t)})),await l(d)})(t.value))}),[t.value]),React.createElement(o,re({className:e.inline_group?"inline-flex":"",setting:e,fieldState:n,required:e.required,label:e.label,disabled:a.settingsIsUpdating||e.disabled,context:e.context,help:e.help,options:e.options},a,t)))}))}));ie.displayName="FormField";const se=ie},2986:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(1609),o=a(181),r=a.n(o),l=a(7723),i=a(7665),s=a(9270),c=a(7097),d=a(6681);var u=a(4441);const m=async({data:e=!0})=>await(0,d.A)("onboarding/is_page_title_available","POST",{data:e}),p=()=>{const{getValue:e}=(0,u.A)(),t=[{id:1,path:"/onboarding/create-your-account",fields:[{id:"email",type:"text",label:(0,l.__)("Email","simplybook"),required:!0,validation:{regex:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",message:(0,l.__)("Please enter a valid email address","simplybook")}},{required:!0,id:"terms-and-conditions",type:"checkbox",label:(0,l.__)("I agree to the terms and conditions","simplybook")}],beforeSubmit:async e=>{console.log("submit email step");let t=await(async({data:e=!0})=>(console.log("calling registerEmail api",e),await(0,d.A)("onboarding/register_email","POST",{data:e})))({data:e});if("success"!==t.status)return console.log("setting api error to ",t.message),b(t.message),!1;console.log(e)}},{id:2,path:"/onboarding/tips-and-tricks",fields:[{id:"tips-and-tricks",type:"checkbox"}],beforeSubmit:async e=>{console.log("submit tips and tricks step"),await(async({data:e=!0})=>(console.log("calling registerTipsTricks api",e),(await(0,d.A)("onboarding/tipstricks","POST",{data:e})).data))({data:e})}},{id:3,path:"/onboarding/information-check",fields:[{id:"company_name",type:"text",label:"Company name"},{id:"category",type:"select",label:(0,l.__)("Business category","simplybook"),options:[{value:"3",label:(0,l.__)("Beauty and wellness","simplybook")},{value:"43",label:(0,l.__)("Sport and fitness","simplybook")},{value:"5",label:(0,l.__)("Personal meetings and services","simplybook")},{value:"1",label:(0,l.__)("Medical","simplybook")},{value:"4",label:(0,l.__)("Events and entertainment","simplybook")},{value:"6",label:(0,l.__)("Education","simplybook")},{value:"75",label:(0,l.__)("Retailers","simplybook")},{value:"7",label:(0,l.__)("Officials","simplybook")},{value:"8",label:(0,l.__)("Other category","simplybook")}]},{id:"service",type:"text",label:(0,l.__)("What service do you provide?","simplybook")},{id:"phone",type:"text",label:(0,l.__)("Phone","simplybook"),validation:{regex:"^\\+?[0-9\\s\\-().]+$",message:(0,l.__)("Please enter a valid phone number","simplybook")}},{id:"address",type:"text",label:(0,l.__)("Address","simplybook")},{id:"zip",type:"text",label:(0,l.__)("Postal Code","simplybook")},{id:"city",type:"text",label:(0,l.__)("City","simplybook")},{id:"country",type:"select",label:(0,l.__)("Country","simplybook"),options:[{value:"NL",label:(0,l.__)("Netherlands","simplybook")},{value:"DE",label:(0,l.__)("Germany","simplybook")},{value:"BE",label:(0,l.__)("Belgium","simplybook")},{value:"US",label:(0,l.__)("United States","simplybook")}]}],beforeSubmit:async e=>{console.log("submit information check step"),console.log(e);let t=await(async({data:e=!0})=>(console.log("calling registerCompany api",e),await(0,d.A)("onboarding/company_registration","POST",{data:e})))({data:e});if(console.log("registercompany response ",t),"success"!==t.status)return console.log("setting api error to ",t.message),b(t.message),!1;b("")}},{id:4,path:"/onboarding/confirm-email",fields:[{id:"confirmation-code",type:"text",label:(0,l.__)("Confirmation Code","simplybook")}],beforeSubmit:async e=>{if(!e.recaptchaToken)return console.log("missing recaptchatoken, cancel submit"),!1;console.log("found recaptcha token ",e.recaptchaToken),console.log("confirm email step"),console.log(e);let t=await(async({data:e=!0})=>await(0,d.A)("onboarding/confirm_email","POST",{data:e}))({data:e});if("success"!==t.status)return console.log("setting api error to ",t.message),b(t.message),!1;b("")}},{id:5,path:"/onboarding/style-widget",fields:[{id:"sb_base_color",type:"colorpicker",label:(0,l.__)("Primary","simplybook"),default:"#DD3649",inline_group:"widget",save_on_change:!0,mapping:["btn_color_1","sb_company_label_color","booking_nav_bg_color"]},{id:"sb_busy",type:"colorpicker",label:(0,l.__)("Secondary","simplybook"),default:"#DD3649",inline_group:"widget",save_on_change:!0},{id:"sb_available",type:"colorpicker",label:(0,l.__)("Active","simplybook"),default:"#DD3649",inline_group:"widget",save_on_change:!0}]},{id:6,path:"/onboarding/implementation",fields:[{id:"implementation",type:"implementation",label:"",default:"generated",save_on_change:!0,options:[{value:"generated",label:(0,l.__)("Generated","simplybook"),description:(0,l.__)("Generate pages.","simplybook")},{value:"manual",label:(0,l.__)("Shortcode","simplybook"),description:(0,l.__)("Do it yourself","simplybook")},{value:"templates",label:(0,l.__)("Templates","simplybook"),description:(0,l.__)("Premium","simplybook"),is_premium:!0}]}],beforeSubmit:async t=>{if("manual"!==e("implementation")){console.log("submit implementation step ",a,p);const e={bookingPageName:a,calendarPageName:p};if("success"!==(await(async({data:e=!0})=>await(0,d.A)("onboarding/generate_pages","POST",{data:e}))({data:e})).status)return!1}}}],[a,o]=(0,n.useState)(simplybook.site_url+"/"+(0,l.__)("my-booking","simplybook")),[p,g]=(0,n.useState)(simplybook.site_url+"/"+(0,l.__)("calendar","simplybook")),[f,b]=(0,n.useState)(""),y=(0,i.jE)(),{settings:h}=(0,u.A)(),v={};t.forEach((e=>{e.fields.forEach((e=>{v[e.id]=""}))}));let _={};h?.forEach((e=>{e.id in v&&(_[e.id]=e.value)}));const x=(0,s.I)({queryKey:["onboarding_data"],initialData:{...v,..._,onboardingCompleted:simplybook.is_onboarding_completed,calendarPageNameAvailable:!0,bookingPageNameAvailable:!0},staleTime:3e5}),{mutate:w}=(0,c.n)({mutationFn:async e=>{y.setQueryData(["onboarding_data"],(t=>({...t,...e}))),y.invalidateQueries(["onboarding_data"])}}),{mutate:k}=(0,c.n)({mutationFn:async e=>{y.setQueryData(["onboarding_data"],(t=>({...t,onboardingCompleted:e})))},onSuccess:()=>{y.invalidateQueries(["onboarding_data"])}}),{mutate:N}=(0,c.n)({mutationFn:async()=>{const e="success"===(await m({data:{title:p}})).status;y.setQueryData(["onboarding_data"],(t=>({...t,calendarPageNameAvailable:e})))},onSuccess:()=>{y.invalidateQueries(["onboarding_data"])}}),{mutate:S}=(0,c.n)({mutationFn:async()=>{const e="success"===(await m({data:{title:a}})).status;y.setQueryData(["onboarding_data"],(t=>({...t,bookingPageNameAvailable:e})))},onSuccess:()=>{y.invalidateQueries(["onboarding_data"])}}),E=(0,n.useCallback)(r()((e=>S(e)),500),[]),j=(0,n.useCallback)(r()((e=>N(e)),500),[]);return{steps:t,data:x.data,defaultData:v,updateData:w,getCurrentStepId:e=>t.find((t=>t.path===e))?.id,getCurrentStep:e=>t.find((t=>t.path===e)),getURLForStep:e=>t[e-1]?.path,isLastStep:e=>t.length===t.find((t=>t.path===e))?.id,recaptchaToken:x.data?.recaptchaToken||"",setRecaptchaToken:e=>w({recaptchaToken:e}),onboardingCompleted:x.data?.onboardingCompleted||!1,setOnboardingCompleted:e=>k(e),setBookingPageName:e=>{return o(t=e),void E(t);var t},setCalendarPageName:e=>{return g(t=e),void j(t);var t},bookingPageName:a,calendarPageName:p,calendarPageNameAvailable:x.data?.calendarPageNameAvailable,bookingPageNameAvailable:x.data?.bookingPageNameAvailable,apiError:f,setApiError:b}}},4441:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(1728),o=a(7665),r=a(9270),l=a(7097),i=a(6681);const s=()=>{const e=(0,n.c)(19),t=(0,o.jE)(),a=d;let s,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=["settings_fields"],e[0]=s):s=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(c={queryKey:s,queryFn:u,staleTime:3e5,initialData:a(window.simplybook&&window.simplybook.settings_fields),retry:0,select:m},e[1]=c):c=e[1];const p=(0,r.I)(c);let g;e[2]!==p.data?(g=e=>p.data.find((t=>t.id===e))?.value,e[2]=p.data,e[3]=g):g=e[3];const f=g;let b;e[4]!==p.data||e[5]!==t?(b=(e,a)=>{const n=p.data.find((t=>t.id===e));n&&(n.value=a),t.setQueryData(["settings_fields"],(t=>t.map((t=>t.id===e?{...t,value:a}:t))))},e[4]=p.data,e[5]=t,e[6]=b):b=e[6];const y=b;let h,v;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=async e=>{console.log("saving data",e);const t=await(async e=>{console.log("saving settings",e);const t=await(0,i.A)("settings/save","POST",e);return console.log("save settings fields response",t.data),t.data})(e);return a(t)},e[7]=h):h=e[7],e[8]!==t?(v={mutationFn:h,onSuccess:async e=>{t.setQueryData(["settings_fields"],(t=>e?[...e]:[])),t.invalidateQueries(["settings_fields"])}},e[8]=t,e[9]=v):v=e[9];const{mutateAsync:_}=(0,l.n)(v),x=p.isLoading||"fetching"===p.fetchStatus;let w,k;return e[10]!==t?(w=()=>t.invalidateQueries(["settings_fields"]),e[10]=t,e[11]=w):w=e[11],e[12]!==f||e[13]!==p.data||e[14]!==_||e[15]!==y||e[16]!==x||e[17]!==w?(k={settings:p.data,saveSettings:_,getValue:f,setValue:y,isSavingSettings:x,invalidateSettings:w},e[12]=f,e[13]=p.data,e[14]=_,e[15]=y,e[16]=x,e[17]=w,e[18]=k):k=e[18],k};function c(e){return"checkbox"===e.type&&(e.value=!!e.value),e}function d(e){return e.map(c)}function u(){return(async({withValues:e=!0})=>(await(0,i.A)("settings/get","POST",{withValues:e})).data)({withValues:!0})}function m(e){return e?[...e]:[]}},6905:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(1728),o=(a(1609),a(9270)),r=a(3287);const l=()=>{const e=(0,n.c)(10),{settingsId:t}=r.Route.useParams();let a,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=["settings_menu"],e[0]=a):a=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(l={queryKey:a,queryFn:s,initialData:window.simplybook&&window.simplybook.settings_menu,staleTime:3e5},e[1]=l):l=e[1];const i=(0,o.I)(l);let c;e[2]!==i.data||e[3]!==t?(c=i.data.find((e=>e.id===t))||{},e[2]=i.data,e[3]=t,e[4]=c):c=e[4];const d=c;let u;return e[5]!==d||e[6]!==i.data||e[7]!==i.isError||e[8]!==i.isLoading?(u={menu:i.data,currentForm:d,menuIsLoading:i.isLoading,menuIsError:i.isError},e[5]=d,e[6]=i.data,e[7]=i.isError,e[8]=i.isLoading,e[9]=u):u=e[9],u};function i(e,t){window.simplybook&&window.simplybook.settings_menu&&e(window.simplybook.settings_menu),t(new Error("Settings menu not found"))}function s(){return new Promise(i)}},7493:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(1728),o=a(9270),r=a(6681),l=a(2986),i=a(1609);const s=()=>{const e=(0,n.c)(19),{setOnboardingCompleted:t}=(0,l.A)(),[a,s]=(0,i.useState)(!0);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={status:"waiting"},e[0]=c):c=e[0];const[d,u]=(0,i.useState)(c),[m,p]=(0,i.useState)(0);let g,f,b;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=["registration_callback_status"],f={status:"waiting"},e[1]=g,e[2]=f):(g=e[1],f=e[2]),e[3]!==m||e[4]!==a||e[5]!==d||e[6]!==t?(b=async()=>{if(!a)return console.log("Polling disabled"),d;p(m+1);const e=await(0,r.A)("check_registration_callback_status","POST",{data:{status:"waiting"}});return u(e.data),"completed"===e.data.status&&(s(!1),t(!0)),m>100&&s(!1),e.data},e[3]=m,e[4]=a,e[5]=d,e[6]=t,e[7]=b):b=e[7];const y=!!a;let h,v,_;e[8]!==a?(h=e=>!!a&&3e3,e[8]=a,e[9]=h):h=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{s(!1)},e[10]=v):v=e[10],e[11]!==b||e[12]!==y||e[13]!==h?(_={queryKey:g,initialData:f,queryFn:b,enabled:y,refetchInterval:h,onError:v},e[11]=b,e[12]=y,e[13]=h,e[14]=_):_=e[14];const{isFetching:x}=(0,o.I)(_);let w,k;return e[15]===Symbol.for("react.memo_cache_sentinel")?(w=()=>s(!0),e[15]=w):w=e[15],e[16]!==x||e[17]!==a?(k={startPolling:w,pollingEnabled:a,isPolling:x},e[16]=x,e[17]=a,e[18]=k):k=e[18],k}},3287:(e,t,a)=>{a.r(t),a.d(t,{Route:()=>N});var n=a(6037),o=a(4441),r=a(9785),l=a(6905),i=a(1728),s=a(1609);const c=()=>{const e=(0,i.c)(4),[t,a]=(0,s.useState)(0);let n,o;if(e[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{const e=()=>{const e=document.documentElement.scrollHeight-window.innerHeight;a(Math.round(window.scrollY/e*100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},o=[],e[0]=n,e[1]=o):(n=e[0],o=e[1]),(0,s.useEffect)(n,o),!(document.documentElement.scrollHeight>window.innerHeight))return null;const r=`${Math.max(t,10)}%`;let l;return e[2]!==r?(l=React.createElement("div",{className:"h-1 w-full bg-gray-200"},React.createElement("div",{className:"h-full bg-blue-500",style:{width:r}})),e[2]=r,e[3]=l):l=e[3],l};c.displayName="FormScrollProgressLine";const d=c;var u=a(8908),m=a(7723),p=a(1577);function g(e){const t=(0,i.c)(35),{onSubmit:a,control:n}=e;let l;t[0]!==n?(l={control:n},t[0]=n,t[1]=l):l=t[1];const{isDirty:s,isSubmitting:c,isValidating:g,isValid:b}=(0,r.lN)(l),{isSavingSettings:y}=(0,o.A)();let h,v,_,x;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.__)("Saving...","simplybook"),t[2]=h):h=t[2],t[3]!==c?(v={condition:c,message:h,color:"blue"},t[3]=c,t[4]=v):v=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.__)("Validating...","simplybook"),t[5]=_):_=t[5],t[6]!==g?(x={condition:g,message:_,color:"blue"},t[6]=g,t[7]=x):x=t[7];const w=!b;let k,N,S,E,j;t[8]===Symbol.for("react.memo_cache_sentinel")?(k=(0,m.__)("Form contains errors","simplybook"),t[8]=k):k=t[8],t[9]!==w?(N={condition:w,message:k,color:"red"},t[9]=w,t[10]=N):N=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(S=(0,m.__)("You have unsaved changes","simplybook"),t[11]=S):S=t[11],t[12]!==s?(E={condition:s,message:S,color:"amber"},t[12]=s,t[13]=E):E=t[13],t[14]!==E||t[15]!==v||t[16]!==x||t[17]!==N?(j=[v,x,N,E],t[14]=E,t[15]=v,t[16]=x,t[17]=N,t[18]=j):j=t[18];const R=j;let O;t[19]!==R?(O=R.find(f),t[19]=R,t[20]=O):O=t[20];const A=O;let P,C;t[21]===Symbol.for("react.memo_cache_sentinel")?(P=React.createElement(d,null),t[21]=P):P=t[21],t[22]!==A?(C=A&&React.createElement("p",{className:`text-sm text-${A.color}-500 flex items-center gap-2`},A.message),t[22]=A,t[23]=C):C=t[23];const F=!s||c||g||y;let I,q,L,T;return t[24]===Symbol.for("react.memo_cache_sentinel")?(I=(0,m.__)("Save","simplybook"),t[24]=I):I=t[24],t[25]!==y||t[26]!==c?(q=c||y&&React.createElement(p.A,{className:"ml-4",name:"spinner",color:"white"}),t[25]=y,t[26]=c,t[27]=q):q=t[27],t[28]!==a||t[29]!==F||t[30]!==q?(L=React.createElement(u.A,{onClick:a,disabled:F},I,q),t[28]=a,t[29]=F,t[30]=q,t[31]=L):L=t[31],t[32]!==C||t[33]!==L?(T=React.createElement("div",{className:"sticky bottom-0 start-0 z-10 rounded-b-md bg-gray-50 shadow-md"},P,React.createElement("div",{className:"flex flex-row justify-end gap-2 items-center p-5"},C,L)),t[32]=C,t[33]=L,t[34]=T):T=t[34],T}function f(e){return e.condition}g.displayName="FormFooter";const b=g;var y=a(1674),h=a(7330),v=a(5071),_=a(9073);const x=(0,s.memo)((e=>{const t=(0,i.c)(14),{group:a,currentGroupFields:n,control:o,isLastGroup:r}=e,l=r?"rounded-b-none":"mb-5",s=a.id;let c,d,u,m;if(t[0]!==a.title?(c=React.createElement(h.A,{title:a.title}),t[0]=a.title,t[1]=c):c=t[1],t[2]!==o||t[3]!==n){let e;t[5]!==o?(e=e=>React.createElement(_.A,{setting:e,key:e.id,control:o}),t[5]=o,t[6]=e):e=t[6],d=n.map(e),t[2]=o,t[3]=n,t[4]=d}else d=t[4];return t[7]!==d?(u=React.createElement(v.A,null,React.createElement("div",{className:"flex flex-wrap"},d)),t[7]=d,t[8]=u):u=t[8],t[9]!==l||t[10]!==a.id||t[11]!==c||t[12]!==u?(m=React.createElement(y.A,{key:s,className:l},c,u),t[9]=l,t[10]=a.id,t[11]=c,t[12]=u,t[13]=m):m=t[13],m}));x.displayName="SettingsGroupBlock";const w=x;var k=a(396);const N=(0,n.uV)("/settings/$settingsId")({loader:({params:e})=>(e=>{const t=(window.simplybook?.settings_menu||[]).find((t=>t.id===e));if(!t)throw new Error("Settings not found");return{settingsData:t}})(e.settingsId),component:function(){const{settingsId:e}=N.useParams(),{settings:t,saveSettings:a}=(0,o.A)(),{currentForm:n}=(0,l.A)(),i=(0,s.useMemo)((()=>t.filter((t=>t.menu_id===e))),[t,e]),c=(0,s.useMemo)((()=>S(t,e)),[t,e]),d=(0,s.useMemo)((()=>S(t,e,"value")),[t,e]),u=(0,s.useMemo)((()=>n.groups[n.groups.length-1]),[n.groups]),{handleSubmit:p,control:g,reset:f,formState:{isDirty:y}}=(0,r.mN)({defaultValues:c,values:d});return function(e,t){const{shouldBlockFn:a,enableBeforeUnload:n=!0,disabled:o=!1,withResolver:r=!1}=function(e,t){if(void 0===e)return{shouldBlockFn:()=>!0,withResolver:!1};if("shouldBlockFn"in e)return e;if("function"==typeof e){const a=Boolean(t??!0);return{shouldBlockFn:async()=>!!a&&await e(),enableBeforeUnload:a,withResolver:!1}}const a=Boolean(e.condition??!0),n=e.blockerFn;return{shouldBlockFn:async()=>a&&void 0!==n?await n():a,enableBeforeUnload:a,withResolver:void 0===n}}(e,t),l=(0,k.r)(),{history:i}=l,[c,d]=s.useState({status:"idle",current:void 0,next:void 0,action:void 0,proceed:void 0,reset:void 0});s.useEffect((()=>o?void 0:i.block({blockerFn:async e=>{function t(e){const t=l.parseLocation(void 0,e),a=l.getMatchedRoutes(t);if(void 0===a.foundRoute)throw new Error(`No route found for location ${e.href}`);return{routeId:a.foundRoute.id,fullPath:a.foundRoute.fullPath,pathname:t.pathname,params:a.routeParams,search:t.search}}const n=t(e.currentLocation),o=t(e.nextLocation),i=await a({action:e.action,current:n,next:o});if(!r)return i;if(!i)return!1;const s=new Promise((t=>{d({status:"blocked",current:n,next:o,action:e.action,proceed:()=>t(!1),reset:()=>t(!0)})})),c=await s;return d({status:"idle",current:void 0,next:void 0,action:void 0,proceed:void 0,reset:void 0}),c},enableBeforeUnload:n})),[a,n,o,r,i,l])}({blockerFn:()=>window.confirm((0,m.__)("You have unsaved changes. Are you sure you want to leave?","simplybook")),condition:y}),React.createElement("form",null,n.groups?.map((e=>{const t=u.id===e.id,a=i.filter((t=>t.group_id===e.id));return React.createElement(w,{key:e.id,group:e,currentGroupFields:a,control:g,isLastGroup:t})})),React.createElement(b,{onSubmit:p((e=>{a(e).then((()=>{f(c)}))})),control:g}))}}),S=(e,t,a="default")=>{const n={};return e.forEach((e=>{e.menu_id===t&&(n[e.id]=e[a])})),n}}}]);