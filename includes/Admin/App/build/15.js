"use strict";(self.webpackChunksimplybook_app=self.webpackChunksimplybook_app||[]).push([[15],{1674:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(4848),o=r(1609),a=r(4164),l=(0,o.memo)((function(e){var t=e.className,r=void 0===t?"":t,o=e.children;return(0,n.jsx)("div",{className:(0,a.A)(r,"bg-white shadow-md rounded-xl flex flex-col"),children:o})}));l.displayName="Block";const s=l},9587:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(4848),o=r(5920),a=r(1609),l=r(7723),s=(0,a.memo)((function(e){var t=e.label,r=e.context,a=e.help,s=e.error,i=e.reverseLabel,c=void 0!==i&&i,d=e.className,u=void 0===d?"":d,m=e.inputId,p=e.required,f=void 0!==p&&p,b=e.children,y=["flex w-full flex-col",u,"pt-4"].filter(Boolean).join(" "),g=["flex w-full flex-col",c?"flex-col-reverse":""].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:y,children:[(0,n.jsxs)("div",{className:g,children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(o.b,{className:"cursor-pointer pb-1 font-medium text-black text-md",htmlFor:m,children:[t,f&&(0,n.jsxs)("span",{className:"ml-1 text-gray-500 font-normal text-xs",children:["(",(0,l.__)("Required","simplybook"),")"]})]}),a&&(0,n.jsx)("p",{className:"pb-1 text-xs font-light text-gray-600",children:a})]}),b]}),s&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-red-600",role:"alert",children:s}),r&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-gray-600",children:r})]})}));s.displayName="FieldWrapper";const i=s},8908:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(4848),o=r(3992),a=r(4164),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)},s=function(e){var t=e.children,r=e.onClick,s=e.link,i=e.btnVariant,c=void 0===i?"secondary":i,d=e.disabled,u=void 0!==d&&d,m=e.size,p=void 0===m?"md":m,f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["children","onClick","link","btnVariant","disabled","size"]),b=(0,a.$)("rounded-full transition-all duration-200",{"bg-secondary text-white hover:bg-secondary-dark":"primary"===c,"bg-tertiary text-white hover:bg-tertiary-dark":"secondary"===c,"border-2 border-tertiary bg-transparent text-black hover:bg-tertiary-light":"tertiary"===c},{"py-.5 px-3 font-normal text-xs border-1":"sm"===p,"py-2 px-6 font-semibold":"md"===p,"py-3 px-8 text-lg font-semibold":"lg"===p},{"opacity-50 cursor-not-allowed":u});return s?(0,n.jsx)(o.N_,l({to:s.to,className:b},f,{children:t})):(0,n.jsx)("button",l({onClick:r,className:b,disabled:u},f,{children:t}))};s.displayName="ButtonInput";const i=s},5071:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1609),o=r(4164);const a=({children:e,className:t=""})=>(0,n.createElement)("div",{className:(0,o.A)(t,"p-5 flex-grow")},e);a.displayName="BlockContent";const l=a},7330:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1609),o=r(4164);const a=({title:e,controls:t,className:r=""})=>(0,n.createElement)("div",{className:(0,o.A)(r,"flex items-center justify-between px-5 py-4")},(0,n.createElement)("h2",{className:"text-base font-bold"},e),t);a.displayName="BlockHeading";const l=a},4731:(e,t,r)=>{r.d(t,{A:()=>L});var n=r(1609),o=r.n(n),a=r(9785),l=r(4848),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},i=(0,n.forwardRef)((function(e,t){var r=e.type,n=void 0===r?"text":r,o=e.className,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["type","className"]);return(0,l.jsx)("input",s({ref:t,type:n,className:"w-full rounded-md border border-gray-300 p-2 focus:border-tertiary focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(o||"")},a))}));i.displayName="TextInput";const c=i;var d=r(9587);r(5150);const u=(0,n.forwardRef)((({field:e,fieldState:t,label:r,help:o,context:a,className:l,...s},i)=>{const u=s.id||e.name;return(0,n.createElement)(d.A,{label:r,help:o,error:t?.error?.message,context:a,className:l,inputId:u,required:s.required},(0,n.createElement)(c,{id:u,type:"text","aria-invalid":!!t?.error?.message,...e,...s}))}));u.displayName="TextField";const m=u;var p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},f=(0,n.forwardRef)((function(e,t){e.type,e.className;var r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["type","className"]);return(0,l.jsx)("input",p({ref:t,type:"hidden"},r))}));f.displayName="HiddenInput";const b=f,y=(0,n.forwardRef)((({field:e,fieldState:t,label:r,help:o,context:a,className:l,...s},i)=>{const c=s.id||e.name;return(0,n.createElement)(b,{...e,id:c,type:"hidden","aria-invalid":!!t?.error?.message,...s})}));y.displayName="HiddenField";const g=y;var h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},v=(0,n.forwardRef)((function(e,t){var r=e.type,o=void 0===r?"checkbox":r,a=e.className,s=e.value,i=e.onChange,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["type","className","value","onChange"]),d=(0,n.useState)(!1),u=d[0],m=d[1];return(0,n.useEffect)((function(){m("1"===s||1===s)}),[s]),(0,l.jsx)("input",h({checked:u,ref:t,onChange:function(e){i&&m(e.target.checked)},type:o,className:"rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(a||"")},c))}));v.displayName="CheckboxInput";const x=v,w=(0,n.forwardRef)((({field:e,fieldState:t,label:r,help:o,context:a,className:l,...s},i)=>{const c=s.id||e.name;return(0,n.createElement)(d.A,{label:r,help:o,error:t?.error?.message,context:a,className:l,inputId:c,required:s.required},(0,n.createElement)(x,{...e,id:c,type:"checkbox","aria-invalid":!!t?.error?.message,...s}))}));w.displayName="CheckboxField";const N=w;var j=r(8547),O=r(4164),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},E=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const S=o().forwardRef((function(e,t){var r=e.value,n=e.onChange,o=e.options,a=void 0===o?[]:o;return e.field,E(e,["value","onChange","options","field"]),(0,l.jsxs)(j.bL,{value:r,onValueChange:function(e){return n(e)},children:[(0,l.jsxs)(j.l9,{ref:t,className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-2 focus:border-tertiary focus:outline-none focus:ring",children:[(0,l.jsx)(j.WT,{placeholder:"Select an optionâ€¦"}),(0,l.jsx)(j.In,{className:"ml-2",children:"v"})]}),(0,l.jsx)(j.ZL,{children:(0,l.jsxs)(j.UC,{className:"rounded-md border border-gray-300 bg-white shadow-lg",children:[(0,l.jsx)(j.PP,{className:"flex items-center justify-center p-2"}),(0,l.jsx)(j.LM,{className:"p-2",children:a.map((function(e){return(0,l.jsx)(P,{value:e.value,children:e.label},e.value)}))}),(0,l.jsx)(j.wn,{className:"flex items-center justify-center p-2",children:"v"})]})})]})}));var P=o().forwardRef((function(e,t){var r=e.children,n=e.className,o=E(e,["children","className"]);return(0,l.jsxs)(j.q7,k({ref:t,className:(0,O.$)("flex cursor-pointer items-center justify-between rounded-md p-2 hover:bg-gray-100 focus:bg-gray-200",n)},o,{children:[(0,l.jsx)(j.p4,{children:r}),(0,l.jsx)(j.VF,{className:"ml-2",children:"v"})]}))}));r(2498);const _=(0,n.forwardRef)((({field:e,fieldState:t,label:r,help:o,context:a,className:l,options:s,...i},c)=>{const u=i.id||e.name;return(0,n.createElement)(d.A,{label:r,help:o,error:t?.error?.message,context:a,className:l,inputId:u,required:i.required},(0,n.createElement)(S,{value:e.value,id:u,options:s,"aria-invalid":!!t?.error?.message,field:e,...e,...i}))}));_.displayName="SelectField";const F=_;var I=r(6244),A=r(7723);const C={text:m,api:m,hidden:g,checkbox:N,select:F},q=(0,n.memo)((({setting:e,control:t,...r})=>{if(!1===e.visible)return(0,n.createElement)("input",{type:"hidden",defaultValue:e.value||e.default});const o=C[e.type];if(!o)return(0,n.createElement)("div",{className:"w-full"},"Unknown field type: ",e.type," ",e.id);const l={...e.required&&{required:{value:!0,message:e.requiredMessage||(0,A.__)("This field is required","simplybook")}},...e.validation?.regex&&{pattern:{value:new RegExp(e.validation.regex),message:e.validation.message||(0,A.__)("Invalid format","simplybook")}},...e.min&&{min:e.min},...e.max&&{max:e.max},...e.minLength&&{minLength:e.minLength},...e.maxLength&&{maxLength:e.maxLength},...e.validate&&{validate:e.validate}};return(0,n.createElement)(I.A,null,(0,n.createElement)(a.xI,{name:e.id,control:t,rules:l,defaultValue:e.value||e.default,render:({field:t,fieldState:a})=>(0,n.createElement)(o,{field:t,fieldState:a,required:e.required,label:e.label||e.id,disabled:r.settingsIsUpdating||e.disabled,context:e.context,help:e.help,options:e.options,...r})}))}));q.displayName="FormField";const L=q},6905:(e,t,r)=>{r.d(t,{A:()=>a}),r(1609);var n=r(9270),o=r(3287);const a=()=>{const{settingsId:e}=o.Route.useParams(),t=(0,n.I)({queryKey:["settings_menu"],queryFn:()=>new Promise(((e,t)=>{window.simplybook&&window.simplybook.settings_menu&&e(window.simplybook.settings_menu),t(new Error("Settings menu not found"))})),initialData:window.simplybook&&window.simplybook.settings_menu,staleTime:3e5}),r=t.data.find((t=>t.id===e))||{};return{menu:t.data,currentForm:r,menuIsLoading:t.isLoading,menuIsError:t.isError}}},3287:(e,t,r)=>{r.r(t),r.d(t,{Route:()=>w});var n=r(1609),o=r(6037),a=r(5150),l=r(9785),s=r(6905),i=r(4731);const c=()=>{const[e,t]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const e=()=>{const e=document.documentElement.scrollHeight-window.innerHeight;t(Math.round(window.scrollY/e*100))};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),document.documentElement.scrollHeight>window.innerHeight?(0,n.createElement)("div",{className:"h-1 w-full bg-gray-200"},(0,n.createElement)("div",{className:"h-full bg-blue-500",style:{width:`${Math.max(e,10)}%`}})):null};c.displayName="FormScrollProgressLine";const d=c;var u=r(8908),m=r(7723);function p({onSubmit:e,control:t}){const{isDirty:r,isSubmitting:o,isValidating:a,isValid:s}=(0,l.lN)({control:t}),i=[{condition:o,message:(0,m.__)("Saving...","simplybook"),color:"blue"},{condition:a,message:(0,m.__)("Validating...","simplybook"),color:"blue"},{condition:!s,message:(0,m.__)("Form contains errors","simplybook"),color:"red"},{condition:r,message:(0,m.__)("You have unsaved changes","simplybook"),color:"amber"}].find((e=>e.condition));return(0,n.createElement)("div",{className:"sticky bottom-0 start-0 z-10 rounded-b-md bg-gray-50 shadow-md"},(0,n.createElement)(d,null),(0,n.createElement)("div",{className:"flex flex-row justify-end gap-2 items-center p-5"},i&&(0,n.createElement)("p",{className:`text-sm text-${i.color}-500 flex items-center gap-2`},i.message),(0,n.createElement)(u.A,{onClick:e,disabled:o||a},(0,m.__)("Save","simplybook"))))}p.displayName="FormFooter";const f=p;var b=r(1674),y=r(7330),g=r(5071);const h=(0,n.memo)((({group:e,currentGroupFields:t,control:r,isLastGroup:o})=>{const a=o?"rounded-b-none":"mb-5";return(0,n.createElement)(b.A,{key:e.id,className:a},(0,n.createElement)(y.A,{title:e.title}),(0,n.createElement)(g.A,null,(0,n.createElement)("div",{className:"flex flex-wrap"},t.map((e=>(0,n.createElement)(i.A,{setting:e,key:e.id,control:r}))))))}));h.displayName="SettingsGroupBlock";const v=h;var x=r(396);const w=(0,o.uV)("/settings/$settingsId")({loader:({params:e})=>(e=>{const t=(window.simplybook?.settings_menu||[]).find((t=>t.id===e));if(!t)throw new Error("Settings not found");return{settingsData:t}})(e.settingsId),component:function(){const{settingsId:e}=w.useParams(),{settings:t,saveSettings:r}=(0,a.A)(),{currentForm:o}=(0,s.A)(),i=(0,n.useMemo)((()=>t.filter((t=>t.menu_id===e))),[t,e]),c=(0,n.useMemo)((()=>N(t,e)),[t,e]),d=(0,n.useMemo)((()=>N(t,e,"value")),[t,e]),u=(0,n.useMemo)((()=>o.groups[o.groups.length-1]),[o.groups]),{handleSubmit:m,control:p,reset:b,formState:{isDirty:y}}=(0,l.mN)({defaultValues:c,values:d});return function(e,t){const{blockerFn:r,blockerCondition:o}=e?"function"==typeof e?{blockerFn:e,blockerCondition:t??!0}:{blockerFn:e.blockerFn,blockerCondition:e.condition??!0}:{blockerFn:void 0,blockerCondition:t??!0},{history:a}=(0,x.r)(),[l,s]=n.useState({status:"idle",proceed:()=>{},reset:()=>{}});n.useEffect((()=>o?a.block((async()=>{if(r)return await r();const e=new Promise((e=>{s({status:"blocked",proceed:()=>e(!0),reset:()=>e(!1)})})),t=await e;return s({status:"idle",proceed:()=>{},reset:()=>{}}),t})):void 0),[r,o,a])}({blockerFn:()=>window.confirm("Are you sure you want to leave?"),condition:y}),(0,n.createElement)("form",null,o.groups?.map((e=>{const t=u.id===e.id,r=i.filter((t=>t.group_id===e.id));return(0,n.createElement)(v,{key:e.id,group:e,currentGroupFields:r,control:p,isLastGroup:t})})),(0,n.createElement)(f,{onSubmit:m((e=>{r(e).then((()=>{b(c)}))})),control:p}))}}),N=(e,t,r="default")=>{const n={};return e.forEach((e=>{e.menu_id===t&&(n[e.id]=e[r])})),n}}}]);